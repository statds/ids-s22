
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9.6. Stepwise Regression &#8212; Introduction to Data Science, Spring 2022</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Supervised Learning" href="supervised.html" />
    <link rel="prev" title="9.5. Generalized Additive Models" href="gams.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/tricircle.pdf" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Data Science, Spring 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   1. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markdown.html">
   2. Markdown Basics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="prman.html">
   3. Project Management
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="module.html">
   4. Building a Python Module
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="refresh.html">
   5. Python Refreshment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scipy.html">
   6. SciPy for Data Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pandas.html">
   7. Data Manipulation with Pandas
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="visual.html">
   8. Visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="matplotlib.html">
     8.1. Matplotlib: Visualization with Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="plotnine.html">
     8.2. Plotnine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cartopy.html">
     8.3. Cartopy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gmplot.html">
     8.4. GM Plot
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bokeh.html">
     8.5. Interactive Visualizations Using Bokeh
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="statmodels.html">
   9. Statistical Tests and Models
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="patsy.html">
     9.1. Describing Models with Patsy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tests.html">
     9.2. Hypothesis Tests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="models.html">
     9.3. Linear and Generalized Linear Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="gams.html">
     9.5. Generalized Additive Models
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     9.6. Stepwise Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="supervised.html">
   10. Supervised Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="decisiontrees.html">
     10.2. Decision Trees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="randomforests.html">
     10.3. Random Forests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bagging_vs_boosting.html">
     10.4. Bagging versus Boosting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="svm.html">
     10.5. Support Vector Machines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="nearest_neighbor.html">
     10.16. K Nearest Neighbor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="XGBoost.html">
     10.17. XGBoost
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Tensorflow.html">
     10.19. Tensorflow
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="unsupervised.html">
   11. Unsupervised Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="k_means_clustering.html">
     11.1. K-means Clustering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="GMM.html">
     11.2. Gaussian Mixture Models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="miscellaneous.html">
   12. Miscellaneous
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="web_scraping.html">
     12.1. Web Scraping with Beautiful Soup
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exercises.html">
   13. Exercises
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fixedit.html">
   14. I Fixed It
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="back.html">
   15. Bibliography
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/docs/stepwise_regression.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-scrubbing">
   9.6.1. Data scrubbing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-bronx-is-removed">
   9.6.2. The Bronx is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#staten-island-is-removed">
   9.6.3. Staten island is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#brooklyn-is-removed">
   9.6.4. Brooklyn is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#persons-killed-is-removed">
   9.6.5. Persons Killed is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manhattan-is-removed">
   9.6.6. Manhattan is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#start-by-adding-hour">
   9.6.7. Start by adding Hour
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-date">
   9.6.8. Add Date
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-bronx">
   9.6.9. Add Bronx
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-brooklyn">
   9.6.10. Add Brooklyn
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Stepwise Regression</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-scrubbing">
   9.6.1. Data scrubbing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-bronx-is-removed">
   9.6.2. The Bronx is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#staten-island-is-removed">
   9.6.3. Staten island is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#brooklyn-is-removed">
   9.6.4. Brooklyn is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#persons-killed-is-removed">
   9.6.5. Persons Killed is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manhattan-is-removed">
   9.6.6. Manhattan is removed
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#start-by-adding-hour">
   9.6.7. Start by adding Hour
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-date">
   9.6.8. Add Date
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-bronx">
   9.6.9. Add Bronx
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-brooklyn">
   9.6.10. Add Brooklyn
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="stepwise-regression">
<h1><span class="section-number">9.6. </span>Stepwise Regression<a class="headerlink" href="#stepwise-regression" title="Permalink to this headline">¶</a></h1>
<p>In a stepwise regression, variables are added and removed from the model based on significance. You can have a forward selection stepwise which adds variables if they are statistically significant until all the variables outside the model are not significant, a backwards elimination stepwise regression which puts in all the variables and then removes those that are not statistically significant until only statistically significant ones remain, and a bidirectional elimination which both adds and removes until all the variables inside are significant AND all those outside are not significant.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CRASH DATE</th>
      <th>CRASH TIME</th>
      <th>BOROUGH</th>
      <th>ZIP CODE</th>
      <th>LATITUDE</th>
      <th>LONGITUDE</th>
      <th>LOCATION</th>
      <th>ON STREET NAME</th>
      <th>CROSS STREET NAME</th>
      <th>OFF STREET NAME</th>
      <th>...</th>
      <th>VEHICLE TYPE CODE 5</th>
      <th>lat</th>
      <th>long</th>
      <th>hour</th>
      <th>date</th>
      <th>BROOK</th>
      <th>BRONX</th>
      <th>MANHAT</th>
      <th>STATEN</th>
      <th>QUEENS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01/01/2022</td>
      <td>7:05</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>EAST 128 STREET</td>
      <td>3 AVENUE BRIDGE</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>01/01/2022</td>
      <td>14:43</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>40.769993</td>
      <td>-73.915825</td>
      <td>(40.769993, -73.915825)</td>
      <td>GRAND CENTRAL PKWY</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>14</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>01/01/2022</td>
      <td>21:20</td>
      <td>QUEENS</td>
      <td>11414.0</td>
      <td>40.657230</td>
      <td>-73.841380</td>
      <td>(40.65723, -73.84138)</td>
      <td>91 STREET</td>
      <td>160 AVENUE</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>21</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>01/01/2022</td>
      <td>4:30</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Southern parkway</td>
      <td>Jfk expressway</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>01/01/2022</td>
      <td>7:57</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>WESTCHESTER AVENUE</td>
      <td>SHERIDAN EXPRESSWAY</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>0</td>
      <td>0</td>
      <td>7</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 38 columns</p>
</div>
<div class="section" id="data-scrubbing">
<h2><span class="section-number">9.6.1. </span>Data scrubbing<a class="headerlink" href="#data-scrubbing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/nyc_mv_collisions_202201.csv&quot;</span><span class="p">)</span>

<span class="n">zeros</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="n">zeros</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;LATITUDE&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;LATITUDE&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;LATITUDE&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;LONGITUDE&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;CRASH TIME&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;:&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;CRASH TIME&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;CRASH TIME&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">cap</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;hour&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cap</span>

<span class="n">df</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;CRASH DATE&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">cap</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cap</span>
    
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;BROOK&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;BRONX&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;MANHAT&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;STATEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;QUEENS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">zeros</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;NaN&quot;</span><span class="p">:</span>
        <span class="n">cat</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;BROOKLYN&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BROOK&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;BRONX&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BRONX&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;MANHATTAN&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;MANHAT&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;STATEN ISLAND&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;STATEN&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;BOROUGH&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;QUEENS&#39;</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;QUEENS&quot;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;hour&quot;</span><span class="p">,</span> <span class="s2">&quot;BROOK&quot;</span><span class="p">,</span> <span class="s2">&quot;BRONX&quot;</span><span class="p">,</span> <span class="s2">&quot;STATEN&quot;</span><span class="p">,</span> <span class="s2">&quot;QUEENS&quot;</span><span class="p">,</span> <span class="s2">&quot;MANHAT&quot;</span><span class="p">,</span> <span class="s2">&quot;NUMBER OF PERSONS KILLED&quot;</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;NUMBER OF PERSONS INJURED&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_stats</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">x_columns</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>

<span class="k">def</span> <span class="nf">rem_high</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">x_columns</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="n">spot</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="n">spot</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">spot</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="n">spot</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">.05</span><span class="p">:</span>
        <span class="n">x_columns</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">spot</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">get_stats</span><span class="p">()</span>
<span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>      date  hour  BROOK  BRONX  STATEN  QUEENS  MANHAT  \
0        1     7      0      0       0       0       0   
1        1    14      0      0       0       0       0   
2        1    21      0      0       0       1       0   
3        1     4      0      0       0       0       0   
4        1     7      0      0       0       0       0   
...    ...   ...    ...    ...     ...     ...     ...   
7654    31    12      0      0       0       1       0   
7655    31    21      1      0       0       0       0   
7656    31     9      1      0       0       0       0   
7657    31     6      0      1       0       0       0   
7658    31    14      0      0       0       1       0   

      NUMBER OF PERSONS KILLED  lat  
0                            0    0  
1                            0    1  
2                            0    1  
3                            0    0  
4                            0    0  
...                        ...  ...  
7654                         0    1  
7655                         0    1  
7656                         0    1  
7657                         0    1  
7658                         0    1  

[7659 rows x 9 columns]
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.226
Model:                                   OLS   Adj. R-squared (uncentered):              0.225
Method:                        Least Squares   F-statistic:                              279.0
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               03:31:10   Log-Likelihood:                         -8476.1
No. Observations:                       7659   AIC:                                  1.697e+04
Df Residuals:                           7651   BIC:                                  1.702e+04
Df Model:                                  8                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
date                         0.0018      0.001      2.109      0.035       0.000       0.003
hour                         0.0139      0.001     11.350      0.000       0.011       0.016
BROOK                       -0.0278      0.022     -1.279      0.201      -0.070       0.015
STATEN                      -0.0293      0.053     -0.554      0.580      -0.133       0.074
QUEENS                      -0.0682      0.023     -2.918      0.004      -0.114      -0.022
MANHAT                      -0.0622      0.030     -2.084      0.037      -0.121      -0.004
NUMBER OF PERSONS KILLED     0.2820      0.173      1.633      0.103      -0.057       0.621
lat                          0.2189      0.022      9.965      0.000       0.176       0.262
==============================================================================
Omnibus:                     4117.098   Durbin-Watson:                   1.964
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            35735.067
Skew:                           2.450   Prob(JB):                         0.00
Kurtosis:                      12.379   Cond. No.                         452.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
<div class="section" id="the-bronx-is-removed">
<h2><span class="section-number">9.6.2. </span>The Bronx is removed<a class="headerlink" href="#the-bronx-is-removed" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.226
Model:                                   OLS   Adj. R-squared (uncentered):              0.225
Method:                        Least Squares   F-statistic:                              318.8
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               03:31:12   Log-Likelihood:                         -8476.3
No. Observations:                       7659   AIC:                                  1.697e+04
Df Residuals:                           7652   BIC:                                  1.702e+04
Df Model:                                  7                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
date                         0.0018      0.001      2.108      0.035       0.000       0.003
hour                         0.0139      0.001     11.340      0.000       0.011       0.016
BROOK                       -0.0261      0.022     -1.214      0.225      -0.068       0.016
QUEENS                      -0.0666      0.023     -2.871      0.004      -0.112      -0.021
MANHAT                      -0.0605      0.030     -2.039      0.042      -0.119      -0.002
NUMBER OF PERSONS KILLED     0.2826      0.173      1.636      0.102      -0.056       0.621
lat                          0.2175      0.022      9.970      0.000       0.175       0.260
==============================================================================
Omnibus:                     4118.495   Durbin-Watson:                   1.964
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            35771.998
Skew:                           2.451   Prob(JB):                         0.00
Kurtosis:                      12.384   Cond. No.                         452.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
<div class="section" id="staten-island-is-removed">
<h2><span class="section-number">9.6.3. </span>Staten island is removed<a class="headerlink" href="#staten-island-is-removed" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.226
Model:                                   OLS   Adj. R-squared (uncentered):              0.225
Method:                        Least Squares   F-statistic:                              371.7
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               03:31:15   Log-Likelihood:                         -8477.0
No. Observations:                       7659   AIC:                                  1.697e+04
Df Residuals:                           7653   BIC:                                  1.701e+04
Df Model:                                  6                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
date                         0.0018      0.001      2.072      0.038    9.57e-05       0.003
hour                         0.0138      0.001     11.301      0.000       0.011       0.016
QUEENS                      -0.0579      0.022     -2.624      0.009      -0.101      -0.015
MANHAT                      -0.0518      0.029     -1.798      0.072      -0.108       0.005
NUMBER OF PERSONS KILLED     0.2818      0.173      1.632      0.103      -0.057       0.620
lat                          0.2098      0.021     10.049      0.000       0.169       0.251
==============================================================================
Omnibus:                     4121.849   Durbin-Watson:                   1.964
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            35880.243
Skew:                           2.453   Prob(JB):                         0.00
Kurtosis:                      12.400   Cond. No.                         452.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
<div class="section" id="brooklyn-is-removed">
<h2><span class="section-number">9.6.4. </span>Brooklyn is removed<a class="headerlink" href="#brooklyn-is-removed" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.225
Model:                                   OLS   Adj. R-squared (uncentered):              0.225
Method:                        Least Squares   F-statistic:                              445.4
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               03:31:18   Log-Likelihood:                         -8478.3
No. Observations:                       7659   AIC:                                  1.697e+04
Df Residuals:                           7654   BIC:                                  1.700e+04
Df Model:                                  5                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
date           0.0018      0.001      2.084      0.037       0.000       0.003
hour           0.0138      0.001     11.296      0.000       0.011       0.016
QUEENS        -0.0578      0.022     -2.621      0.009      -0.101      -0.015
MANHAT        -0.0516      0.029     -1.791      0.073      -0.108       0.005
lat            0.2102      0.021     10.071      0.000       0.169       0.251
==============================================================================
Omnibus:                     4130.912   Durbin-Watson:                   1.964
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            36165.015
Skew:                           2.458   Prob(JB):                         0.00
Kurtosis:                      12.443   Cond. No.                         77.7
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
<div class="section" id="persons-killed-is-removed">
<h2><span class="section-number">9.6.5. </span>Persons Killed is removed<a class="headerlink" href="#persons-killed-is-removed" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rem_high</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.225
Model:                                   OLS   Adj. R-squared (uncentered):              0.225
Method:                        Least Squares   F-statistic:                              555.8
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               03:31:21   Log-Likelihood:                         -8479.9
No. Observations:                       7659   AIC:                                  1.697e+04
Df Residuals:                           7655   BIC:                                  1.700e+04
Df Model:                                  4                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
date           0.0017      0.001      2.036      0.042    6.47e-05       0.003
hour           0.0137      0.001     11.253      0.000       0.011       0.016
QUEENS        -0.0515      0.022     -2.365      0.018      -0.094      -0.009
lat            0.2052      0.021      9.918      0.000       0.165       0.246
==============================================================================
Omnibus:                     4134.561   Durbin-Watson:                   1.965
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            36246.070
Skew:                           2.460   Prob(JB):                         0.00
Kurtosis:                      12.454   Cond. No.                         60.8
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</pre></div>
</div>
</div>
<div class="section" id="manhattan-is-removed">
<h2><span class="section-number">9.6.6. </span>Manhattan is removed<a class="headerlink" href="#manhattan-is-removed" title="Permalink to this headline">¶</a></h2>
<p>From here we can see all variables are under the .05 threshold established previously. Our formula would come out to be <br>
y = date * .0017 + hour * .0137 - QUEENS * .0515 + lat * .2052</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x_col</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">used</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">crunch_num</span><span class="p">():</span>
    <span class="n">p_val</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">location</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_columns</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">used</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">x_columns</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">p_val</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)])</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">p_val</span> <span class="o">&gt;</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)]):</span>
            <span class="n">p_val</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)]</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">i</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p_val</span> <span class="o">&lt;</span><span class="mf">.05</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="n">x_col</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_columns</span><span class="p">[</span><span class="n">location</span><span class="p">])</span>
        <span class="n">x_columns</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x_columns</span><span class="p">[</span><span class="n">location</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crunch_num</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1
1.4323814844141276e-306
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.167
Model:                                   OLS   Adj. R-squared (uncentered):              0.167
Method:                        Least Squares   F-statistic:                              1537.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                   1.43e-306
Time:                               05:18:18   Log-Likelihood:                         -8755.8
No. Observations:                       7659   AIC:                                  1.751e+04
Df Residuals:                           7658   BIC:                                  1.752e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
date           0.0185      0.000     39.207      0.000       0.018       0.019
==============================================================================
Omnibus:                     3858.755   Durbin-Watson:                   1.810
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            29521.077
Skew:                           2.303   Prob(JB):                         0.00
Kurtosis:                      11.444   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
1.4323814844141276e-306
0.0
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              2014.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:18   Log-Likelihood:                         -8562.1
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7658   BIC:                                  1.713e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0271      0.001     44.880      0.000       0.026       0.028
==============================================================================
Omnibus:                     3979.018   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33128.310
Skew:                           2.360   Prob(JB):                         0.00
Kurtosis:                      12.030   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
4.269856558800235e-90
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.052
Model:                                   OLS   Adj. R-squared (uncentered):              0.051
Method:                        Least Squares   F-statistic:                              416.0
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                    4.27e-90
Time:                               05:18:18   Log-Likelihood:                         -9253.7
No. Observations:                       7659   AIC:                                  1.851e+04
Df Residuals:                           7658   BIC:                                  1.852e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
BROOK          0.3956      0.019     20.397      0.000       0.358       0.434
==============================================================================
Omnibus:                     3929.307   Durbin-Watson:                   1.678
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            32281.384
Skew:                           2.327   Prob(JB):                         0.00
Kurtosis:                      11.916   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
2.393436485478676e-52
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.030
Model:                                   OLS   Adj. R-squared (uncentered):              0.030
Method:                        Least Squares   F-statistic:                              235.4
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                    2.39e-52
Time:                               05:18:18   Log-Likelihood:                         -9340.3
No. Observations:                       7659   AIC:                                  1.868e+04
Df Residuals:                           7658   BIC:                                  1.869e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
BRONX          0.4082      0.027     15.342      0.000       0.356       0.460
==============================================================================
Omnibus:                     3987.014   Durbin-Watson:                   1.601
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            32899.862
Skew:                           2.370   Prob(JB):                         0.00
Kurtosis:                      11.979   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
4.369430499033895e-11
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.006
Model:                                   OLS   Adj. R-squared (uncentered):              0.006
Method:                        Least Squares   F-statistic:                              43.57
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                    4.37e-11
Time:                               05:18:18   Log-Likelihood:                         -9434.6
No. Observations:                       7659   AIC:                                  1.887e+04
Df Residuals:                           7658   BIC:                                  1.888e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
STATEN         0.3842      0.058      6.601      0.000       0.270       0.498
==============================================================================
Omnibus:                     4179.444   Durbin-Watson:                   1.527
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            37164.558
Skew:                           2.489   Prob(JB):                         0.00
Kurtosis:                      12.574   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
6.945005855138339e-56
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.032
Model:                                   OLS   Adj. R-squared (uncentered):              0.032
Method:                        Least Squares   F-statistic:                              252.1
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                    6.95e-56
Time:                               05:18:18   Log-Likelihood:                         -9332.2
No. Observations:                       7659   AIC:                                  1.867e+04
Df Residuals:                           7658   BIC:                                  1.867e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
QUEENS         0.3482      0.022     15.878      0.000       0.305       0.391
==============================================================================
Omnibus:                     3969.257   Durbin-Watson:                   1.627
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            32316.549
Skew:                           2.362   Prob(JB):                         0.00
Kurtosis:                      11.886   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
4.461967379856326e-32
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.018
Model:                                   OLS   Adj. R-squared (uncentered):              0.018
Method:                        Least Squares   F-statistic:                              140.3
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                    4.46e-32
Time:                               05:18:18   Log-Likelihood:                         -9386.8
No. Observations:                       7659   AIC:                                  1.878e+04
Df Residuals:                           7658   BIC:                                  1.878e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
MANHAT         0.3596      0.030     11.843      0.000       0.300       0.419
==============================================================================
Omnibus:                     4087.592   Durbin-Watson:                   1.584
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            35155.863
Skew:                           2.431   Prob(JB):                         0.00
Kurtosis:                      12.302   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
0.0018205759792527649
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.001
Model:                                   OLS   Adj. R-squared (uncentered):              0.001
Method:                        Least Squares   F-statistic:                              9.729
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                     0.00182
Time:                               05:18:18   Log-Likelihood:                         -9451.4
No. Observations:                       7659   AIC:                                  1.890e+04
Df Residuals:                           7658   BIC:                                  1.891e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
NUMBER OF PERSONS KILLED     0.6111      0.196      3.119      0.002       0.227       0.995
==============================================================================
Omnibus:                     4194.263   Durbin-Watson:                   1.510
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            37329.833
Skew:                           2.501   Prob(JB):                         0.00
Kurtosis:                      12.590   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
0.0
0.0
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.210
Model:                                   OLS   Adj. R-squared (uncentered):              0.210
Method:                        Least Squares   F-statistic:                              2032.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:18   Log-Likelihood:                         -8555.0
No. Observations:                       7659   AIC:                                  1.711e+04
Df Residuals:                           7658   BIC:                                  1.712e+04
Df Model:                                  1                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
lat            0.3962      0.009     45.077      0.000       0.379       0.413
==============================================================================
Omnibus:                     4119.911   Durbin-Watson:                   1.965
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            35447.666
Skew:                           2.456   Prob(JB):                         0.00
Kurtosis:                      12.324   Cond. No.                         1.00
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
1
</pre></div>
</div>
</div>
<div class="section" id="start-by-adding-hour">
<h2><span class="section-number">9.6.7. </span>Start by adding Hour<a class="headerlink" href="#start-by-adding-hour" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">crunch_nums</span><span class="p">():</span>
    <span class="n">p_val</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">location</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_columns</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)):</span>
        <span class="n">x_col</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_columns</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">x_col</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">OLS</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
        <span class="n">x_col</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">p_val</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)])</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">p_val</span> <span class="o">&gt;</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)]):</span>
            <span class="n">p_val</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">pvalues</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x_col</span><span class="p">)]</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p_val</span> <span class="o">&lt;</span><span class="mf">.05</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="n">x_col</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_columns</span><span class="p">[</span><span class="n">location</span><span class="p">])</span>
        <span class="n">x_columns</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x_columns</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">location</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crunch_nums</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.215
Model:                                   OLS   Adj. R-squared (uncentered):              0.215
Method:                        Least Squares   F-statistic:                              1049.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8529.0
No. Observations:                       7659   AIC:                                  1.706e+04
Df Residuals:                           7657   BIC:                                  1.708e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0210      0.001     21.614      0.000       0.019       0.023
date           0.0060      0.001      8.154      0.000       0.005       0.007
==============================================================================
Omnibus:                     4031.194   Durbin-Watson:                   1.943
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33946.805
Skew:                           2.396   Prob(JB):                         0.00
Kurtosis:                      12.133   Cond. No.                         3.01
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
1
4.0666379515353367e-16
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.209
Method:                        Least Squares   F-statistic:                              1013.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8557.5
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.713e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0263      0.001     39.070      0.000       0.025       0.028
BROOK          0.0593      0.020      3.011      0.003       0.021       0.098
==============================================================================
Omnibus:                     3992.980   Durbin-Watson:                   1.959
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33490.382
Skew:                           2.368   Prob(JB):                         0.00
Kurtosis:                      12.084   Cond. No.                         32.6
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.0026154978758844666
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.209
Method:                        Least Squares   F-statistic:                              1012.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8558.0
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.713e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0266      0.001     41.659      0.000       0.025       0.028
BRONX          0.0722      0.025      2.847      0.004       0.022       0.122
==============================================================================
Omnibus:                     3981.961   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33171.456
Skew:                           2.362   Prob(JB):                         0.00
Kurtosis:                      12.035   Cond. No.                         41.9
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.004426633639098556
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8561.8
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0271      0.001     44.270      0.000       0.026       0.028
STATEN         0.0367      0.053      0.699      0.484      -0.066       0.140
==============================================================================
Omnibus:                     3980.742   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33169.872
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.036   Cond. No.                         86.9
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.4843669202067119
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8561.9
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0270      0.001     41.304      0.000       0.026       0.028
QUEENS         0.0114      0.021      0.532      0.594      -0.031       0.053
==============================================================================
Omnibus:                     3980.405   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33143.808
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.031   Cond. No.                         35.5
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.5944459717669641
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8562.0
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0271      0.001     42.898      0.000       0.026       0.028
MANHAT         0.0115      0.028      0.405      0.686      -0.044       0.067
==============================================================================
Omnibus:                     3980.428   Durbin-Watson:                   1.958
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33157.904
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.034   Cond. No.                         47.0
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.6858402170710972
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1009.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:18:31   Log-Likelihood:                         -8560.3
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
hour                         0.0271      0.001     44.790      0.000       0.026       0.028
NUMBER OF PERSONS KILLED     0.3296      0.175      1.888      0.059      -0.013       0.672
==============================================================================
Omnibus:                     3969.378   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            32855.187
Skew:                           2.355   Prob(JB):                         0.00
Kurtosis:                      11.987   Cond. No.                         289.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.059032381034271476
0
</pre></div>
</div>
</div>
<div class="section" id="add-date">
<h2><span class="section-number">9.6.8. </span>Add Date<a class="headerlink" href="#add-date" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crunch_nums</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.215
Model:                                   OLS   Adj. R-squared (uncentered):              0.215
Method:                        Least Squares   F-statistic:                              1049.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8529.0
No. Observations:                       7659   AIC:                                  1.706e+04
Df Residuals:                           7657   BIC:                                  1.708e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0210      0.001     21.614      0.000       0.019       0.023
date           0.0060      0.001      8.154      0.000       0.005       0.007
==============================================================================
Omnibus:                     4031.194   Durbin-Watson:                   1.943
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33946.805
Skew:                           2.396   Prob(JB):                         0.00
Kurtosis:                      12.133   Cond. No.                         3.01
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
1
4.0666379515353367e-16
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.209
Method:                        Least Squares   F-statistic:                              1013.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8557.5
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.713e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0263      0.001     39.070      0.000       0.025       0.028
BROOK          0.0593      0.020      3.011      0.003       0.021       0.098
==============================================================================
Omnibus:                     3992.980   Durbin-Watson:                   1.959
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33490.382
Skew:                           2.368   Prob(JB):                         0.00
Kurtosis:                      12.084   Cond. No.                         32.6
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.0026154978758844666
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.209
Method:                        Least Squares   F-statistic:                              1012.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8558.0
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.713e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0266      0.001     41.659      0.000       0.025       0.028
BRONX          0.0722      0.025      2.847      0.004       0.022       0.122
==============================================================================
Omnibus:                     3981.961   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33171.456
Skew:                           2.362   Prob(JB):                         0.00
Kurtosis:                      12.035   Cond. No.                         41.9
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.004426633639098556
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8561.8
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0271      0.001     44.270      0.000       0.026       0.028
STATEN         0.0367      0.053      0.699      0.484      -0.066       0.140
==============================================================================
Omnibus:                     3980.742   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33169.872
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.036   Cond. No.                         86.9
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.4843669202067119
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8561.9
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0270      0.001     41.304      0.000       0.026       0.028
QUEENS         0.0114      0.021      0.532      0.594      -0.031       0.053
==============================================================================
Omnibus:                     3980.405   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33143.808
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.031   Cond. No.                         35.5
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.5944459717669641
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.208
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1007.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8562.0
No. Observations:                       7659   AIC:                                  1.713e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0271      0.001     42.898      0.000       0.026       0.028
MANHAT         0.0115      0.028      0.405      0.686      -0.044       0.067
==============================================================================
Omnibus:                     3980.428   Durbin-Watson:                   1.958
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            33157.904
Skew:                           2.361   Prob(JB):                         0.00
Kurtosis:                      12.034   Cond. No.                         47.0
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.6858402170710972
                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.209
Model:                                   OLS   Adj. R-squared (uncentered):              0.208
Method:                        Least Squares   F-statistic:                              1009.
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:12:14   Log-Likelihood:                         -8560.3
No. Observations:                       7659   AIC:                                  1.712e+04
Df Residuals:                           7657   BIC:                                  1.714e+04
Df Model:                                  2                                                  
Covariance Type:                   nonrobust                                                  
============================================================================================
                               coef    std err          t      P&gt;|t|      [0.025      0.975]
--------------------------------------------------------------------------------------------
hour                         0.0271      0.001     44.790      0.000       0.026       0.028
NUMBER OF PERSONS KILLED     0.3296      0.175      1.888      0.059      -0.013       0.672
==============================================================================
Omnibus:                     3969.378   Durbin-Watson:                   1.957
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            32855.187
Skew:                           2.355   Prob(JB):                         0.00
Kurtosis:                      11.987   Cond. No.                         289.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
4.0666379515353367e-16
0.059032381034271476
</pre></div>
</div>
</div>
<div class="section" id="add-bronx">
<h2><span class="section-number">9.6.9. </span>Add Bronx<a class="headerlink" href="#add-bronx" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crunch_nums</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                                    OLS Regression Results                                    
==============================================================================================
Dep. Variable:     NUMBER OF PERSONS INJURED   R-squared (uncentered):                   0.216
Model:                                   OLS   Adj. R-squared (uncentered):              0.216
Method:                        Least Squares   F-statistic:                              421.9
Date:                       Tue, 19 Apr 2022   Prob (F-statistic):                        0.00
Time:                               05:19:25   Log-Likelihood:                         -8524.1
No. Observations:                       7659   AIC:                                  1.706e+04
Df Residuals:                           7654   BIC:                                  1.709e+04
Df Model:                                  5                                                  
Covariance Type:                   nonrobust                                                  
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
hour           0.0202      0.001     20.088      0.000       0.018       0.022
date           0.0056      0.001      7.367      0.000       0.004       0.007
BRONX          0.0624      0.026      2.412      0.016       0.012       0.113
BROOK          0.0472      0.020      2.333      0.020       0.008       0.087
STATEN         0.0417      0.053      0.793      0.428      -0.061       0.145
==============================================================================
Omnibus:                     4043.897   Durbin-Watson:                   1.945
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            34284.761
Skew:                           2.403   Prob(JB):                         0.00
Kurtosis:                      12.184   Cond. No.                         137.
==============================================================================

Notes:
[1] R² is computed without centering (uncentered) since the model does not contain a constant.
[2] Standard Errors assume that the covariance matrix of the errors is correctly specified.
1
0.42787080095123353
</pre></div>
</div>
</div>
<div class="section" id="add-brooklyn">
<h2><span class="section-number">9.6.10. </span>Add Brooklyn<a class="headerlink" href="#add-brooklyn" title="Permalink to this headline">¶</a></h2>
<p>In the new model we have Hour, Date, Bronx, and Brooklyn. A very different outcome than we saw with the other style of selection</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="gams.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">9.5. </span>Generalized Additive Models</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="supervised.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Supervised Learning</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Jun Yan and students in STAT 5255/3255, Spring 2022<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>